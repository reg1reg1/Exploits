#!/usr/bin/python
import struct
import argparse
import sys
import os
import socket
import binascii
socketObject = socket.socket(socket.AF_INET,socket.SOCK_STREAM)
socketObject.connect((sys.argv[1],2998))
resp=""
try:
    while True:
		print "Receiving from socket"
		respbuffer = socketObject.recv(4096)
		resplen= len(respbuffer)
		resp+=respbuffer
		if resplen < 4096:
			break
		print "Response received of length %d" %(resplen)
except Exception as e:
	print "Exception detected at line 20",e
	pass

data= resp.split()
print("Client Sent\n",resp)

val = struct.unpack('<I',resp)
print(val)
#client will expect \n after the data is sent
socketObject.send(str(val[0])+"\n")
outcome=socketObject.recv(4096)
print(outcome)
